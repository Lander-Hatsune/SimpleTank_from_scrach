> Coco2D-X Notebook

# Concepts

## Scene
- `renderer` to show the scene
### Scene Graph (Scene Tree)
- on tree : `object nodes`
- using InOrder traversal to get the priority
- don't mind, use the function next to pile object nodes
```cpp
scene -> addChild(some_objnode, z-order);
```
*where `z-order` is an int showing the priority the obj to be showed, the bigger, the fronter*

## Sprite
```cpp
auto mySprite = Sprite::create("mysprite.png");
//changing the properties below
mySprite -> setPosition(Vec2(500, 0));
mySprite -> setRotation(40);
mySprite -> setScale(2.0); // sets both X and Y uniformly
mySprite -> set AnchorPoint(Vec2(0, 0)); // referenced base point on this sprite when calculating its coordinates, def in [0, 1] as proportion
```

## Action
```cpp
auto mySprite = Sprite::create("mysprite.png");
// move 50px right, 10px up after 2 sec
auto moveBy = MoveBy::create(2, Vec2(50, 10));
mySprite -> runAction(moveBy);
```

## Sequence & Spawn
- multiple actions together, order or rev-order
- the code below : $MoveTo\to delay\to MoveBy\to delay \to MoveTo$
```cpp
auto moveTo1 = MoveTo::create(2, Vec2(50, 10));
auto moveBy1 = MoveBy::create(2, Vec2(100, 10));
auto moveTo2 = MoveTo::create(2, Vec2(150, 10));
auto delay = DelayTime::create(1);
//Actions one by one
mySprite -> runAction(Sequence::create(moveTo1, delay, moveBy1, delay.clone(), moveTo2, nullptr));
//Actions together at one time : use Spawn
mySprite -> runAction(Spawn::create(moveTo1, moveBy1, moveTo2, nullptr));
```

## Relationship Between Nodes
- Father and Son
- more like a bond (I think)

## Logs
- use `log()` to show console some info
```cpp
string s = "a";
log("string s is %s", s);
```

# Details

## Sprite

###Create
- can use a `.jpg` or `.png` or `.tiff` or `.webp` image 
```cpp
// using the whole, raw (same resolution) pic
auto mySprite = Sprite::create("mysprite.png");

// using a rectangle to cut out a piece of the raw pic
auto mySprite = Sprite::create("mysprite.png", Rect(0, 0, 40, 40));
// the rect's params : sttx, stty, length, height
```

- can use a image set (Sprite Sheet)
sprite sheet : using particular tools to merge pictures into a big one, using formats like `plist` to index, costing less spaces, giving better performance.
When using a Sheet, first load them into `SpriteFrameCache`, a global cache class holding `SpriteFrame` objects, boosting access, these objects are load once and kept in `SpriteFrameCache`
```cpp
// load the sprite sheet
auto spritecache = SpriteFrameCache::getInstance();

// the .plist is generated by other tools
spritecache -> addSpriteFramesWithFile("sprites.plist");
```

- can use sprite cache
```cpp
// grab the sprite named "mysprite.png" from the .plist
// create the sprite and cram it into SpriteFrameCache
auto mysprite = Sprite::createWithSpriteFrameName("mysprite.png");

// to access a sprite from the cache obj SpriteFrameCache
// first get the SpriteFrame from the cache obj
// and create the sprite from the SpriteFrame
auto newspriteFrame = SpriteFramCache::getInstance() -> getSpriteFrameByName("mysprite.png");
auto newSprite = Sprite::creatWithSpriteFrame(newspriteFrame);
```

### Manip

- scale
```cpp
mySprite -> setScale(2.0);
mySprite -> setScaleX(2.0);
mySprite -> setScaleY(2.0);
```

- skew
```cpp
mySprite -> setSkewX(20);
mySprite -> setSkewY(20);
```

- color
```cpp
// set the color by passing in a pre-defined Color3B object.
mySprite -> setColor(Color3B::WHITE); // White

// Set the color by passing in a Color3B object.
mySprite -> setColor(Color3B(255, 255, 255)); // Same as Color3B::WHITE
```

- opacity
```cpp
mySprite -> setOpacity(30);
// the larger the number, the more concrete
```

### Polygon Sprite
*normal sprite is seen as two triangles when plotting, while a polygon sprite is seen as a series of triangles*
- promote the performance

- use AutoPolygon : a tool class measuring a image to split it into triangles
```cpp
//first feed the image into the AutoPolygon, get info
auto pinfo = AutoPolygon::generatePolygon("mySprite.png");
//and create sprite with the info
auto sprite = Sprite::create(pinfo);
```

## Actions

### Basic Actions
```cpp
auto mspt = Sprite::create("mySprite.png");
```
- move
```cpp
auto moveTo = MoveTo::create(2, Vec2(50, 0));
auto moveBy = MoveBy::create(2, Vec2(50, 0));
mspt -> runAction(moveTo);
mspt -> runAction(moveBy);
```
- rotate
*clockwise*
```cpp
auto rotateTo = RotateTo::create(2.0, 40); // over 2 seconds
auto rotateBy = RotateBy::create(2.0, 40);
mspt -> runAction(rotateTo);
```
- scale
```cpp
ScaleBy::create(2, 3, 4); 
```